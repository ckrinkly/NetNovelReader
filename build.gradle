buildscript {
    ext.buildconfig = [
        'minSdk': 22,
        'targetSdk': 27,
        'compileSdk': 27
    ]
    ext.versions = [
        'kotlin': '1.2.31',
        'kotlin_html': '0.6.9',
        'ktor':'0.9.1',
        'gradle': '3.2.0-alpha08',
        'supportLibrary': '27.1.0',
        'coroutines': '0.22.5',
        'retrofit': '2.4.0',
        'archLifecycle': "1.1.0",
        'gretty': '2.0.0',
        'tomcat': '8.5.24',

        'junit': '4.12',
        'mockito': '2.8.47',
        'hamcrest': '1.3',
        'runner': '1.0.1',
        'rules': '1.0.1',
        'espresso': '3.0.1',
        'leakcanary': '1.5.4'
    ]
    ext.deps = [
        'android': [
            'arch': [
                'lifecycle': "android.arch.lifecycle:extensions:${versions.archLifecycle}",
                'lifecycle_compiler': "android.arch.lifecycle:compiler:${versions.archLifecycle}",
                'lifecycle_test': "android.arch.core:core-testing:${versions.archLifecycle}",
                'room': 'android.arch.persistence.room:runtime:1.0.0',
                'room_compiler': "android.arch.persistence.room:compiler:1.0.0",
                'room_test': 'android.arch.persistence.room:testing:1.0.0'
            ],
            'support': [
                'v7': "com.android.support:appcompat-v7:${versions.supportLibrary}",
                'cardview': "com.android.support:cardview-v7:${versions.supportLibrary}",
                'design': "com.android.support:design:${versions.supportLibrary}",
                'v4': "com.android.support:support-v4:${versions.supportLibrary}",
                'constraint_layout': 'com.android.support.constraint:constraint-layout:1.0.2',
                'preference': "com.android.support:preference-v7:${versions.supportLibrary}"
            ]
        ],
        'kotlin': [
            'stdlib': "org.jetbrains.kotlin:kotlin-stdlib-jdk8:${versions.kotlin}",
            'coroutines': [
                'core': "org.jetbrains.kotlinx:kotlinx-coroutines-core:${versions.coroutines}",
                'android': "org.jetbrains.kotlinx:kotlinx-coroutines-android:${versions.coroutines}"
            ],
            'ktor':[
                'server': [
                    'core': "io.ktor:ktor-server-core:${versions.ktor}",
                    'netty': "io.ktor:ktor-server-netty:${versions.ktor}",
                    'tomcat': "io.ktor:ktor-server-tomcat:${versions.ktor}",
                    'servlet': "io.ktor:ktor-server-servlet:${versions.ktor}"
                ],
                'features': [
                    'html_builder': "io.ktor:ktor-html-builder:${versions.ktor}"
                ]
            ],
            'js': "org.jetbrains.kotlin:kotlin-stdlib-js:${versions.kotlin}",
            'html': [
                'jvm': "org.jetbrains.kotlinx:kotlinx-html-jvm:${versions.kotlin_html}",
                'js': "org.jetbrains.kotlinx:kotlinx-html-js:${versions.kotlin_html}"
            ]
        ],
        'retrofit': [
            'client': "com.squareup.retrofit2:retrofit:${versions.retrofit}",
            'converter_scalars': 'com.squareup.retrofit2:converter-scalars:2.3.0',
            'converter_gson': 'com.squareup.retrofit2:converter-gson:2.3.0'
        ],
        'leakcanary': [
            'debug': "com.squareup.leakcanary:leakcanary-android:${versions.leakcanary}",
            'release': "com.squareup.leakcanary:leakcanary-android-no-op:${versions.leakcanary}"
        ],
        'databinding_compiler': "com.android.databinding:compiler:${versions.gradle}",
        'circleimageview': 'de.hdodenhof:circleimageview:2.2.0',
        'jsoup': 'org.jsoup:jsoup:1.11.2',
        'javax': [
                'javaee_api': 'javax:javaee-api:7.0'
        ],
        'logback': "ch.qos.logback:logback-classic:1.2.1",
        'commons_dbutils': "commons-dbutils:commons-dbutils:1.7",
        'mariadb_client': "org.mariadb.jdbc:mariadb-java-client:2.2.3",
        'test': [
                'junit': "junit:junit:${versions.junit}",
                'mockito': "org.mockito:mockito-core:${versions.mockito}",
                'mockito_android': "org.mockito:mockito-android:${versions.mockito}",
                'hamcrest': "org.hamcrest:hamcrest-all:${versions.hamcrest}",
                'runner': "com.android.support.test:runner:${versions.runner}",
                'rules': "com.android.support.test:rules:${versions.rules}",
                'espresso':[
                        'core': "com.android.support.test.espresso:espresso-core:${versions.espresso}",
                        'contrib': "com.android.support.test.espresso:espresso-contrib:${versions.espresso}",
                        'intents': "com.android.support.test.espresso:espresso-intents:${versions.espresso}",
                        'idling_concurrent': "com.android.support.test.espresso.idling:idling-concurrent:${versions.espresso}",
                        'idling_resource': "com.android.support.test.espresso:espresso-idling-resource:${versions.espresso}",
                ]
        ]
    ]
    repositories {
        maven { url "https://dl.bintray.com/kotlin/ktor" }
    	mavenCentral()
        google()
        jcenter()
    }
    dependencies {
        classpath "com.android.tools.build:gradle:${versions.gradle}"
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:${versions.kotlin}"
        classpath 'com.bmuschko:gradle-tomcat-plugin:2.4.2'
        classpath "org.akhikhl.gretty:gretty:${versions.gretty}"
    }
}

allprojects {
    repositories {
        maven { url "https://dl.bintray.com/kotlin/ktor" }
    	mavenCentral()
        google()
        jcenter()
    }
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
